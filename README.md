# Telegram Spend Summarizer (Replit)

Бот слушает заданный Telegram-чат, где уже приходят сообщения со спендом, парсит суммы и кластеры (**TEXAS / SKY / ALX**), накапливает за день и отправляет сводку в 23:59.

## Быстрый старт на Replit
1. Создай новый **Python Repl**.
2. Добавь файлы `requirements.txt` и `main.py` из этого архива.
3. В Replit → **Tools → Secrets** добавь переменные:
   - `TELEGRAM_BOT_TOKEN` — токен от @BotFather
   - `SOURCE_CHAT_ID` — ID чата, где падают сообщения (целое число, у каналов — отрицательное)
   - `POST_CHAT_ID` — ID чата, куда отправлять сводку (может совпадать)
   - `TZ` — таймзона, напр. `Europe/Bucharest`
4. Нажми **Run**.
5. Чтобы бот не засыпал на бесплатном плане — подключи аптайм-пингер на `https://<ваш-repl>.replit.app/health`.

## Команды
- `/today` — сводка за сегодня
- `/yesterday` — сводка за вчера
- `/summarize` — ручной запуск подсчёта за сегодня

## Как бот парсит сообщения
- Определяет кластер по ключевым словам `TEXAS`, `SKY`, `ALX` (без учёта регистра).
- Читает число как сумму (поддерживаются форматы `23.94$`, `12,94 $`, `25.48 USD`, `1 234,56`).
- Сохраняет в SQLite (`daily_spend.db`) и в 23:59 отправляет сводку.

## Примечания
- Бот **не ходит в Meta API**, он только суммирует то, что уже выгружается в чат.
- Если понадобится мапа `act_… → кластер` или дополнительные кластеры — легко добавить в коде.
